<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Palettable - Color Palette Generator</title>
<style>
/* â€”â€”â€” original styles unchanged â€”â€”â€” */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background-color:#f9fafb;line-height:1.5}
.container{min-height:100vh;padding:1.5rem;max-width:48rem;margin:0 auto}
.text-center{text-align:center}.mb-8{margin-bottom:2rem}.mb-6{margin-bottom:1.5rem}
.mb-4{margin-bottom:1rem}.mb-2{margin-bottom:0.5rem}.mt-4{margin-top:1rem}
.card{background:#fff;padding:1.5rem;border-radius:.5rem;box-shadow:0 1px 3px rgba(0,0,0,.1)}
.flex{display:flex}.items-center{align-items:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}
.input-container{position:relative;flex:1}
.color-icon{position:absolute;left:.75rem;top:.75rem;width:1.25rem;height:1.25rem;border-radius:.25rem;border:1px solid #d1d5db}
.input{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:1rem;outline:none;font-family:Monaco,Menlo,'Ubuntu Mono',monospace}
.input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.1)}
.input.error{border-color:#ef4444}
.btn{padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-weight:500;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:.5rem}
.btn:disabled{opacity:.6;cursor:not-allowed}
.btn-primary{background:#3b82f6;color:#fff}.btn-primary:hover:not(:disabled){background:#2563eb}
.btn-secondary{background:transparent;color:#6b7280;border:1px solid #d1d5db}.btn-secondary:hover{background:#f3f4f6;color:#374151}
.btn-small{padding:.5rem 1rem;font-size:.875rem}
.select{padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;background:#fff;outline:none;width:100%}
.select:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.1)}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.palette-container{background:#fff;border-radius:.5rem;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.1)}
.palette-colors{display:flex;height:120px}
.palette-color{flex:1;position:relative;cursor:pointer;transition:.2s}
.palette-color:hover{transform:scale(1.05);z-index:10}
.palette-color.locked{position:relative}
.lock-icon{position:absolute;top:.5rem;right:.5rem;width:1rem;height:1rem;background:rgba(0,0,0,.8);color:#fff;border-radius:.25rem;display:flex;align-items:center;justify-content:center;font-size:.75rem}
.color-hex{position:absolute;bottom:.5rem;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-family:Monaco,Menlo,'Ubuntu Mono',monospace;opacity:0;transition:opacity .2s}
.palette-color:hover .color-hex{opacity:1}
.palette-info{padding:1rem}
.palette-name{font-weight:600;color:#111827;margin-bottom:.5rem}
.palette-description{color:#6b7280;font-size:.875rem;margin-bottom:1rem}
.palette-actions{display:flex;gap:.5rem}
.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-sm{font-size:.875rem}
.text-gray-600{color:#6b7280}.text-gray-900{color:#111827}
.hidden{display:none!important}
.message-box{margin-top:1rem;padding:.75rem 1rem;border-radius:.5rem;font-size:.875rem;display:flex;align-items:center;gap:.5rem}
.message-success{background:#f0fdf4;color:#166534}.message-warning{background:#fefce8;color:#92400e}
.icon{width:1rem;height:1rem;stroke:currentColor;fill:none;stroke-width:2}
.error-text{color:#ef4444;font-size:.875rem;margin-top:.25rem}
.color-info{background:#f8fafc;border:1px solid #e2e8f0;border-radius:.375rem;padding:.75rem;margin-top:.5rem;font-size:.875rem;color:#475569}
.color-info-name{font-weight:600;color:#1e293b}
.color-info-details{display:flex;gap:1rem;margin-top:.25rem}
.color-info-hex{font-family:Monaco,Menlo,'Ubuntu Mono',monospace;background:#f1f5f9;padding:.125rem .375rem;border-radius:.25rem}
.color-info-temp{text-transform:capitalize}
@media (max-width:768px){.container{padding:1rem}.card{padding:1rem}.form-row{grid-template-columns:1fr}.color-info-details{flex-direction:column;gap:.5rem}}
</style>
</head>
<body>
<div class="container">
<div class="text-center mb-8">
<img src="logo_palettable.png" alt="Palettable Logo" width="150" height="150">
</div>

<div id="mainInterface">
<div class="mb-6 card">
<h3 class="font-semibold text-gray-900 mb-4">Palette Builder</h3>

<div>
<h4 class="font-medium text-gray-900 mb-2">Dominant Color</h4>
<div class="mb-4">
<div class="flex gap-2">
<div class="input-container">
<div class="color-icon" id="colorIcon" style="background-color:#FCF1EF;"></div>
<input type="text" id="colorInput" class="input" placeholder="3" value="3"/>
</div>
</div>
<div id="colorError" class="error-text hidden">
Color number not found. Try: 1-32 (e.g., 1 for Lilac Taupe, 2 for Pale Champagne, 3 for Petal Pink, etc.)
</div>
<div id="colorInfo" class="color-info">
<div class="color-info-name" id="colorInfoName">Petal Pink</div>
<div class="color-info-details">
<div>Hex: <span class="color-info-hex" id="colorInfoHex">#FCF1EF</span></div>
<div>Temperature: <span class="color-info-temp" id="colorInfoTemp">warm</span></div>
</div>
</div>
</div>

<div class="form-row">
<div>
<label class="font-medium text-gray-900 mb-2" style="display:block;">Palette Size</label>
<select class="select" id="paletteSize">
<option value="2">2 colors</option>
<option value="3" selected>3 colors</option>
<option value="4">4 colors</option>
<option value="5">5 colors</option>
<option value="6">6 colors</option>
</select>
</div>

<div>
<label class="font-medium text-gray-900 mb-2" style="display:block;">What feeling do you want this palette to give?</label>
<select class="select" id="feelingSelect">
<option value="calm">Calm</option>
<option value="playful">Playful</option>
<option value="earthy">Earthy</option>
<option value="minimal">Minimal</option>
<option value="bold">Bold</option>
</select>
</div>
</div>
</div>

<div class="text-center mt-4">
<button class="btn btn-primary" id="generateBtn">
<svg class="icon" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"/></svg>
Generate Palette
</button>
</div>
</div>

<div id="resultsSection" class="hidden">
<div class="flex justify-between items-center mb-4">
<h3 class="font-semibold text-gray-900">Generated Palette</h3>
<div class="text-sm text-gray-600">
Click colors to lock/unlock â€¢ Locked colors stay when regenerating
</div>
</div>
<div id="paletteContainer" class="palette-container"></div>
</div>

<div id="messageBox" class="message-box message-success hidden">
<svg class="icon" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
<span id="messageText">Palette generated successfully!</span>
</div>
</div>

<div class="text-center text-gray-700 text-sm font-normal font-sans mt-8">
Custom-built by <a href="https://creatis.in/pages/stack" class="underline hover:text-black transition">Creatis Stack</a>, v.08.25
</div>
</div>

<script>
/* â€”â€”â€” DATA â€”â€”â€” */
const colorDatabase = [
{ id:1,name:'Lilac Taupe',hex:'#8A7EA6',family:'cool',intensity:'muted',style:['vintage','romantic'],feeling:['calm','minimal'] },
{ id:2,name:'Pale Champagne',hex:'#E6E2B2',family:'warm',intensity:'light',style:['vintage','romantic','minimal'],feeling:['calm','minimal'] },
{ id:3,name:'Petal Pink',hex:'#FCF1EF',family:'warm',intensity:'light',style:['romantic','minimal'],feeling:['calm','minimal'] },
{ id:4,name:'Creamy Salmon',hex:'#ECC7BA',family:'warm',intensity:'light',style:['romantic','vintage'],feeling:['calm','playful'] },
{ id:5,name:'Dark Sage',hex:'#7C7C4A',family:'warm',intensity:'muted',style:['earthy','vintage'],feeling:['earthy','calm'] },
{ id:6,name:'Pale Maroon',hex:'#A05B5F',family:'warm',intensity:'muted',style:['vintage','earthy'],feeling:['earthy','bold'] },
{ id:7,name:'Muted Khaki',hex:'#B3A569',family:'warm',intensity:'muted',style:['earthy','vintage'],feeling:['earthy','calm'] },
{ id:8,name:'Golden Rod',hex:'#C2B356',family:'warm',intensity:'medium',style:['earthy','vintage'],feeling:['earthy','playful'] },
{ id:9,name:'Creamy Lemon',hex:'#FEE1A1',family:'warm',intensity:'light',style:['playful','romantic'],feeling:['playful','calm'] },
{ id:10,name:'Black',hex:'#000000',family:'neutral',intensity:'bold',style:['modern','bold','luxury'],feeling:['bold','minimal'] },
{ id:11,name:'Burgundy',hex:'#A24A63',family:'warm',intensity:'bold',style:['luxury','bold','vintage'],feeling:['bold','earthy'] },
{ id:12,name:'Rose Quartz',hex:'#C3788D',family:'warm',intensity:'medium',style:['romantic','vintage'],feeling:['calm','playful'] },
{ id:13,name:'Olive Green',hex:'#5F5A3C',family:'warm',intensity:'muted',style:['earthy','vintage'],feeling:['earthy','calm'] },
{ id:14,name:'Misty Teal',hex:'#5E7875',family:'cool',intensity:'muted',style:['earthy','modern'],feeling:['calm','minimal'] },
{ id:15,name:'Dark Maroon',hex:'#8B3A3A',family:'warm',intensity:'bold',style:['luxury','bold'],feeling:['bold','earthy'] }, /* fixed */
{ id:16,name:'Olive Brown',hex:'#7C774D',family:'warm',intensity:'muted',style:['earthy','vintage'],feeling:['earthy','calm'] },
{ id:17,name:'Slate Gray',hex:'#7D8985',family:'neutral',intensity:'medium',style:['modern','minimal'],feeling:['minimal','calm'] },
{ id:18,name:'Chocolate Brown',hex:'#6F625A',family:'warm',intensity:'muted',style:['earthy','luxury'],feeling:['earthy','bold'] },
{ id:19,name:'Pastel Teal',hex:'#9EBAB5',family:'cool',intensity:'light',style:['minimal','romantic'],feeling:['calm','minimal'] },
{ id:20,name:'Mint Ice',hex:'#C9D6CF',family:'cool',intensity:'light',style:['minimal','modern'],feeling:['calm','minimal'] },
{ id:21,name:'Soft Stone',hex:'#96928C',family:'neutral',intensity:'light',style:['minimal','modern'],feeling:['minimal','calm'] },
{ id:22,name:'Earth Brown',hex:'#877E72',family:'warm',intensity:'muted',style:['earthy','minimal'],feeling:['earthy','minimal'] },
{ id:23,name:'Harbor Mist',hex:'#A3B2BB',family:'cool',intensity:'light',style:['minimal','modern'],feeling:['calm','minimal'] },
{ id:24,name:'Midnight Slate',hex:'#364A57',family:'cool',intensity:'bold',style:['modern','luxury','bold'],feeling:['bold','minimal'] },
{ id:25,name:'Dusty Coral',hex:'#CD7C73',family:'warm',intensity:'medium',style:['romantic','vintage'],feeling:['playful','calm'] },
{ id:26,name:'Sage Green',hex:'#839D77',family:'warm',intensity:'muted',style:['earthy','minimal'],feeling:['earthy','calm'] },
{ id:27,name:'Mocha Mousse',hex:'#A47B67',family:'warm',intensity:'muted',style:['earthy','luxury'],feeling:['earthy','calm'] },
{ id:28,name:'Forest Fern',hex:'#52684B',family:'warm',intensity:'bold',style:['earthy','bold'],feeling:['earthy','bold'] },
{ id:29,name:'Brick Red',hex:'#7F3336',family:'warm',intensity:'bold',style:['bold','luxury'],feeling:['bold','earthy'] },
{ id:30,name:'Lemongrass',hex:'#D6CF8D',family:'warm',intensity:'light',style:['playful','earthy'],feeling:['playful','earthy'] },
{ id:31,name:'Winter Pear',hex:'#899064',family:'warm',intensity:'muted',style:['earthy','vintage'],feeling:['earthy','calm'] },
{ id:32,name:'Tomato Cream',hex:'#B15533',family:'warm',intensity:'bold',style:['bold','earthy'],feeling:['bold','earthy'] }
];

let currentPalette = [];
let lockedColors = new Set();
let dominantColor = 3;

function showMessage(msg,type='success'){
const box=document.getElementById('messageBox');
const text=document.getElementById('messageText');
box.classList.remove('hidden','message-success','message-warning');
box.classList.add(type==='success'?'message-success':'message-warning');
text.textContent=msg;
setTimeout(()=>box.classList.add('hidden'),2500);
}

function validateColor(input){
const inputField=document.getElementById('colorInput');
const colorIcon=document.getElementById('colorIcon');
const errorDiv=document.getElementById('colorError');
const colorInfoDiv=document.getElementById('colorInfo');
const generateBtn=document.getElementById('generateBtn');
const colorId=parseInt(input);

if(isNaN(colorId)||colorId<1||colorId>32){
inputField.classList.add('error');
errorDiv.classList.remove('hidden');
colorInfoDiv.classList.add('hidden');
generateBtn.disabled=true;
return false;
}

const foundColor=colorDatabase.find(c=>c.id===colorId);
if(foundColor){
inputField.classList.remove('error');
errorDiv.classList.add('hidden');
colorIcon.style.backgroundColor=foundColor.hex;
dominantColor=colorId;
updateColorInfo(foundColor);
colorInfoDiv.classList.remove('hidden');
generateBtn.disabled=false;
return true;
}

inputField.classList.add('error');
errorDiv.classList.remove('hidden');
colorInfoDiv.classList.add('hidden');
generateBtn.disabled=true;
return false;
}

function updateColorInfo(color){
document.getElementById('colorInfoName').textContent=color.name;
document.getElementById('colorInfoHex').textContent=color.hex;
document.getElementById('colorInfoTemp').textContent=color.family;
}

function shuffleArray(array){
const s=[...array];
for(let i=s.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[s[i],s[j]]=[s[j],s[i]];}
return s;
}

function getFeelingColors(available,feeling,count){
const feelingColors=shuffleArray(available.filter(c=>c.feeling?.includes(feeling)));
const others=shuffleArray(available.filter(c=>!c.feeling?.includes(feeling)));
const selected=[];let fi=0,oi=0;
for(let i=0;i<count;i++){
if(fi<feelingColors.length&&Math.random()>0.3){selected.push(feelingColors[fi++]);}
else if(oi<others.length){selected.push(others[oi++]);}
else if(fi<feelingColors.length){selected.push(feelingColors[fi++]);}
}
return selected;
}

function createPalette(dominant,feeling,size){
let available=[...colorDatabase].filter(c=>!lockedColors.has(c.id));
let palette=[...Array.from(lockedColors)].map(id=>colorDatabase.find(c=>c.id===id));

if(!lockedColors.has(dominant.id)){
palette.unshift(dominant);
available=available.filter(c=>c.id!==dominant.id);
}

const remaining=size-palette.length;
if(remaining>0){
palette.push(...getFeelingColors(available,feeling,remaining));
}

// ensure unique + trim
const unique=[];
for(const c of palette){if(!unique.find(u=>u.id===c.id)){unique.push(c);}}
return unique.slice(0,size);
}

function generatePalette(){
if(!validateColor(dominantColor)) return;
const size=parseInt(document.getElementById('paletteSize').value);
const feeling=document.getElementById('feelingSelect').value;
const dominantInfo=colorDatabase.find(c=>c.id===dominantColor);

currentPalette=createPalette(dominantInfo,feeling,size);
displayPalette();
document.getElementById('resultsSection').classList.remove('hidden');
showMessage('Palette generated successfully!','success');
}

function displayPalette(){
const container=document.getElementById('paletteContainer');
const size=parseInt(document.getElementById('paletteSize').value);
const feeling=document.getElementById('feelingSelect').value;

const colorsHtml=currentPalette.map(color=>{
const isLocked=lockedColors.has(color.id);
return `
<div class="palette-color ${isLocked?'locked':''}"
style="background-color:${color.hex};"
data-color-id="${color.id}"
title="Click to ${isLocked?'unlock':'lock'} â€¢ ${color.name}">
${isLocked?'<div class="lock-icon">ðŸ”’</div>':''}
<div class="color-hex">#${color.id}</div>
</div>`;
}).join('');

const paletteTitle=`${feeling.charAt(0).toUpperCase()+feeling.slice(1)} Palette (${currentPalette.length} colors)`;
const paletteDescription=`Generated from #${dominantColor} â€¢ ${lockedColors.size} color${lockedColors.size!==1?'s':''} locked`;

container.innerHTML=`
<div class="palette-colors">${colorsHtml}</div>
<div class="palette-info">
<div class="palette-name">${paletteTitle}</div>
<div class="palette-description">${paletteDescription}</div>
<div class="palette-actions">
<button class="btn btn-secondary btn-small" id="regenerateBtn">
Regenerate
</button>
<button class="btn btn-primary btn-small" id="saveBtn">
Save Palette
</button>
</div>
</div>`;

// lock/unlock
document.querySelectorAll('.palette-color').forEach(el=>{
el.addEventListener('click',()=>{
const id=parseInt(el.getAttribute('data-color-id'));
if(lockedColors.has(id)) lockedColors.delete(id); else lockedColors.add(id);
displayPalette();
});
});

// regenerate
document.getElementById('regenerateBtn').addEventListener('click',generatePalette);

// save (copy to clipboard)
document.getElementById('saveBtn').addEventListener('click',()=>{
const text=currentPalette.map(c=>`${c.id}: ${c.name} (${c.hex})`).join('\n');
navigator.clipboard.writeText(text).then(()=>{
showMessage('Palette copied to clipboard!','success');
}).catch(()=>showMessage('Could not copy. Try again.','warning'));
});
}

/* â€”â€”â€” EVENTS â€”â€”â€” */
document.getElementById('generateBtn').addEventListener('click',generatePalette);
document.getElementById('colorInput').addEventListener('input',e=>validateColor(e.target.value));

// initialize
validateColor(dominantColor);
</script>
</body>
</html>
